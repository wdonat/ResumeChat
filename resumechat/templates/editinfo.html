{% extends 'base.html' %}

{% block title %}EDIT INFO{% endblock %}

{% block header %}
{% endblock %}

{% block content %}
    <!-- <div id="messageBox"></div> -->
    <div id="divMainContainer">

    <div class="registerLoginHeading">
        <h1>Enter all information you wish to share with visitors. You can leave any field blank, and the AI will inform visitors that it does not have access to that information, and that they should contact you directly.</h1>
    </div>
    <center>
        <h1>Your Link ID:</h1>
        <div class="chatLinkID" id="linkID">https://resume-chat.ai/chat?id={{ link }}</div>
        <br>
        <button class="submitButton" onclick="copyText();">COPY LINK</button>
    </center>
    <br><br>

    <form class="loginForm" method="post" action="/editInfo" onsubmit="submitForm(event)">
        <!-- Sends 'name', not 'id' -->
        <script type="text/javascript">console.log("sdfdsdf");</script>
    
        <label for="fullName">My full name is:</label><br>
        <input class="inputField" name="fullName" id="fullName" type="text" size="50" value="{{ fullName }}"><br><br>
        <label for="emailAddress">My email address is:</label><br>
        <input class="inputField" name="emailAddress" id="emailAddress" type="text" value="{{ emailAddress }}"><br><br>
        <label for="phoneNumber">My phone number is:</label><br>
        <input class="inputField" name="phoneNumber" id="phoneNumber" type="text" value="{{ phoneNumber }}"><br><br>
        <label for="salaryRequirement">My minimum salary requirement is:</label><br>
        <input class="inputField" name="salaryRequirement" id="salaryRequirement" type="text" value="{{ salaryRequirement }}"><br><br>
        
        <div class="registerLoginHeading">
            <h1>ONSITE vs. REMOTE vs. HYBRID</h1>
        </div><br>

        <input type="radio" id="onsiteInterestYes" name="onsiteInterest" value=1 {% if onsiteInterest == 1 %}checked{% endif %}>
        <label for="onsiteInterestYes">I am interested in on-site work</label><br>        
        <input type="radio" id="onsiteInterestNo" name="onsiteInterest" value=0 {% if onsiteInterest == 0 %}checked{% endif %}>
        <label for="onsiteInterestNo">I am NOT interested in on-site work</label><br><br>
        

        <input type="radio" id="hybridInterestYes" name="hybridInterest" value=1 {% if hybridInterest == 1 %}checked{% endif %}>
        <label for="hybridInterestYes">I am interested in hybrid work</label><br>
        <input type="radio" id="hybridInterestNo" name="hybridInterest" value=0 {% if hybridInterest == 0 %}checked{% endif %}>
        <label for="hybridInterestNo">I am NOT interested in hybrid work</label><br><br>
        
        <input type="radio" id="remoteInterestYes" name="remoteInterest" value=1 {% if remoteInterest == 1 %}checked{% endif %}>
        <label for="remoteInterestYes">I am interested in remote work</label><br>
        <input type="radio" id="remoteInterestNo" name="remoteInterest" value=0 {% if remoteInterest == 0 %}checked{% endif %}>
        <label for="remoteInterestNo">I am NOT interested in remote work</label><br><br>

        <div class="registerLoginHeading">
            <h1>FULLTIME/PARTTIME/CONTRACT</h1>
        </div>
        <br>

        <input type="checkbox" id="fulltimeWork" name="fulltimeWork" {% if fulltimeWork == 1 %}checked{% endif %}>
        <label for="fulltimeWork">I am interested in full-time work</label><br>
        <input type="checkbox" id="parttimeWork" name="parttimeWork" {% if parttimeWork == 1 %}checked{% endif %}>
        <label for="parttimeWork">I am interested in part-time work</label><br>
        <input type="checkbox" id="contractWork" name="contractWork" {% if contractWork == 1 %}checked{% endif %}>
        <label for="contractWork">I am interested in contract work</label><br><br>

        <div class="registerLoginHeading">
            <h1>TRAVEL FOR WORK</h1>
        </div>
        <br>

        <input type="radio" id="travelWorkYes" name="travelWork" value=1 {% if travelWork == 1 %}checked{% endif %}>
        <label for="travelWorkYes">I am willing to travel for work</label><br>
        <input type="radio" id="travelWorkNo" name="travelWork" value=0 {% if travelWork == 0 %}checked{% endif %}>
        <label for="travelWorkNo">I am NOT willing to travel for work</label><br><br>

        <div class="registerLoginHeading">
            <h1>RELOCATION</h1>
        </div>
        <br>

        <input type="radio" id="relocateYes" name="relocateWork" value=1 {% if relocateWork == 1 %}checked{% endif %}>
        <label for="relocateYes">I am willing to relocate</label><br>
        <input type="radio" id="relocateNo" name="relocateWork" value=0 {% if relocateWork == 0 %}checked{% endif %}>
        <label for="relocateNo">I am NOT willing to relocate</label><br><br>

        <div class="registerLoginHeading">
            <h1>JOB SEARCH STATUS</h1>
        </div>
        <br>

        <input type="radio" id="activeSearch" name="searchStatus" value=1 {% if searchStatus == 1 %}checked{% endif %}>
        <label for="activeSearch">I am actively looking and interviewing for work</label><br>
        <input type="radio" id="idleSearch" name="searchStatus" value=2 {% if searchStatus == 2 %}checked{% endif %}>
        <label for="idleSearch">I am interested in possibilities</label><br>
        <input type="radio" id="justLookingSearch" name="searchStatus" value=3 {% if searchStatus == 3 %}checked{% endif %}>
        <label for="justLookingSearch">I am just seeing what is available</label><br><br>

        <div class="registerLoginHeading">
            <h1>TIME TO START</h1>
        </div>
        <br>

        <input type="radio" id="twoWeekNotice" name="startTime" value=1 {% if startTime == 1 %}checked{% endif %}>
        <label for="twoWeekNotice">I need to give two weeks' notice to my employer</label><br>
        <input type="radio" id="noNotice" name="startTime" value=2 {% if startTime == 2 %}checked{% endif %}>
        <label for="noNotice">I am available to start immediately</label><br><br>

        <div class="registerLoginHeading">
            <h1>PROJECTS</h1>
        </div>
        <br>

        <label for="currentProjects">Some of my current projects include:</label><br><br>
        <textarea id="currentProjects" name="currentProjects" rows="8" cols="75" data-default="List any projects you are currently working on. Be descriptive, as it will help the AI to describe those projects to visitors!">{% if currentProjects != "" %}{{ currentProjects }}{% else %}List any projects you are currently working on. Be descriptive, as it will help the AI to describe those projects to visitors!{% endif %}</textarea>
        <br><br>
        
        <label for="pastProjects">Some of my past projects include:</label><br><br>
        <textarea id="pastProjects" name="pastProjects" rows="8" cols="75" data-default="List any past projects you worked on that you are proud of. Again, be descriptive, as it will help the AI to describe those projects to visitors!">{% if pastProjects != "" %}{{ pastProjects }}{% else %}List any past projects you worked on that you are proud of. Again, be descriptive, as it will help the AI to describe those projects to visitors!{% endif %}</textarea>
        <br><br>

        <div class="registerLoginHeading">
            <h1>SKILLS</h1>
        </div>
        <br>

        <label for="jobSkills"> Skills I would like to highlight: &nbsp;&nbsp;&nbsp;</label>
        <input type="text" id="jobSkills" name="jobSkills" size="50"><br><br>

        <div class="registerLoginHeading">
            <h1>ROLES</h1>
        </div>
        <br>

        <label for="jobRoles">Some roles and/or titles I would consider: &nbsp;&nbsp;&nbsp;</label>
        <input type="text" id="jobRoles" name="jobRoles" size="50"><br><br><br>


        <br><br><br>
            <button class="submitButton" type="submit">SAVE</button>

    </form>

    <div class="registerLoginHeading">
            <a href="uploadresume"><h1>To upload and/or edit your resume on file, click here</h1></a>
    </div>

    </div>



{% endblock %}
{% block scripts %}
<script type="text/javascript">

    var g_systemDialogType = "";
    var g_systemDialogFuncTrue = null;
    var g_systemDialogFuncFalse = null;

    function copyText()
    {
        var x = document.getElementById("linkID").innerHTML;
        navigator.clipboard.writeText(x);
        alertCustom("Copied link to clipboard");
    }

    function clearDefaultValues()
    {
        var currProjs = document.getElementById("currentProjects");
        if (currProjs.value == currProjs.getAttribute("data-default"))
            currProjs.value = "";

        var pastProjs = document.getElementById("pastProjects");
        if (pastProjs.value == pastProjs.getAttribute("data-default"))
            pastProjs.value = "";
    }

    function submitForm(event)
    {
        event.preventDefault();
        clearDefaultValues();
        const formData = new FormData(event.target);
        fetch('/editinfo', {
            method: 'POST',
            body: formData,
        })
        .then(response => response.json())
        .then(data => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
            var alertMessage = data.status + ": " + data.message;
            alertCustom(alertMessage);

            // alert(alertMessage);
            // const messageBox = document.getElementById('messageBox');
            // messageBox.textContent = data.message;
            // messageBox.className = data.status;
        })
        .catch(error => console.error('Error: ', error));
    }

    function initSystemDialog(strRootDivId)
    {
        document.getElementById(strRootDivId).innerHTML += "<div id='divSystemDialog' class='systemDialog hidden'>"+
            " <div class='systemDialogContainer'>"+
            "  <div class='systemDialogTitleBar'>"+
            // "   <img src='static/images/message_icon.png' class='systemDialogIcon' />"+
            // "  <div class='systemDialogTitle'>Alert!</div>"+
            "  </div>"+
            "  <div class='systemDialogBody'>"+
            "   <div id='divSystemDialogMessage' class='systemDialogMessage'>Text</div>"+
            "   <div class='systemDialogButtons'>"+
            "    <div id='divSystemDialogCancelButton' class='systemDialogButton red' onClick='clickedOnSystemDialogCancelButton();'>Cancel</div>"+
            "    <div id='divSystemDialogOkButton' class='systemDialogButton green' onClick='clickedOnSystemDialogOkButton();'>OK</div>"+
            "    <div id='divSystemDialogCloseButton' class='systemDialogButton green' onClick='clickedOnSystemDialogCancelButton();'>Close</div>"+
            "   </div>"+
            "  </div>"+
            " </div>"+
            "</div>";
    }
    
    function showSystemDialog()
    {
        document.getElementById("divSystemDialog").classList.remove("hidden");
    }

    function hideSystemDialog()
    {
        document.getElementById("divSystemDialog").classList.add("hidden");
    }

    function setSystemDialogMessage(message)
    {
        document.getElementById("divSystemDialogMessage").innerHTML = message.replace(/\n/g, "<br>");
    }

    function showSystemDialogCancelButton()
    {
        document.getElementById("divSystemDialogCancelButton").classList.remove("hidden");
    }

    function hideSystemDialogCancelButton()
    {
        document.getElementById("divSystemDialogCancelButton").classList.add("hidden");
    }

    function showSystemDialogCloseButton()
    {
        document.getElementById("divSystemDialogCloseButton").classList.remove("hidden");
    }

    function hideSystemDialogCloseButton()
    {
        document.getElementById("divSystemDialogCloseButton").classList.add("hidden");
    }

    function showSystemDialogOkButton()
    {
        document.getElementById("divSystemDialogOkButton").classList.remove("hidden");
    }

    function hideSystemDialogOkButton()
    {
        document.getElementById("divSystemDialogOkButton").classList.add("hidden");
    }
    
    function alertCustom(message)
    {
        g_systemDialogType = "ALERT";
        g_systemDialogFuncTrue = null;
        g_systemDialogFuncFalse = null;
        hideSystemDialogCancelButton();
        hideSystemDialogOkButton();
        showSystemDialogCloseButton();
        setSystemDialogMessage(message);
        showSystemDialog();
    }

    function confirmCustom(message, funcTrue, funcFalse)
    {
        g_systemDialogType = "CONFIRM";
        g_systemDialogFuncTrue = funcTrue;
        g_systemDialogFuncFalse = funcFalse;
        showSystemDialogCancelButton();
        showSystemDialogOkButton();
        hideSystemDialogCloseButton();
        setSystemDialogMessage(message);
        showSystemDialog();
    }
    
    function clickedOnSystemDialogCancelButton()
    {
        if(g_systemDialogType == "CONFIRM" && g_systemDialogFuncFalse != null)
        {
            g_systemDialogFuncFalse();
        }

        g_systemDialogType = "";
        g_systemDialogFuncTrue = null;
        g_systemDialogFuncFalse = null;
        hideSystemDialog();
    }

    function clickedOnSystemDialogOkButton()
    {
        if(g_systemDialogType == "CONFIRM" && g_systemDialogFuncTrue != null)
        {
            g_systemDialogFuncTrue();
        }
        
        g_systemDialogType = "";
        g_systemDialogFuncTrue = null;
        g_systemDialogFuncFalse = null;
        hideSystemDialog();
    }

    initSystemDialog("divMainContainer");
</script>
{% endblock %}
